<div>
    <ngb-alert *ngIf="errorMessage" type="danger" (close)="errorMessage = null">{{errorMessage}}</ngb-alert>
</div>
<div class="card mb-3 mx-auto" style="max-width: 700px" *ngIf="user">
    <div class="card-header">
        <h3 class="mb-0">User Information</h3>
    </div>
    <div class="card-body m-3 ">
        <form [formGroup]="userForm" (ngSubmit)="onSubmit()" novalidate>
            <div class="form-content">
                <div class="form-group">
                    <input type="text" [(ngModel)]="user.username" class="form-control input-underline input-lg" id="username" placeholder="Username"
                        formControlName="username">
                </div>

                <div class="alert alert-input-error" *ngIf="username.invalid && (username.touched || submitClicked) && username.errors?.required">
                    <div>Username is required.</div>
                </div>

                <div class="form-group">
                    <input type="text" [(ngModel)]="user.email" class="form-control input-underline input-lg" id="email" placeholder="Email"
                        formControlName="email">
                </div>
                <div class="alert alert-input-error" *ngIf="email.invalid && (email.touched || submitClicked)">
                    <div *ngIf="email.errors?.required">
                        Email is required.
                    </div>
                    <div *ngIf="email.errors?.pattern">
                        The email doesn't seem right
                    </div>
                </div>
                <div class="form-group">
                    <input type="password" class="form-control input-underline input-lg" id="password" placeholder="Password" formControlName="password">
                </div>
                <div class="alert alert-input-error" *ngIf="password.invalid && (password.touched || submitClicked)">
                    <div *ngIf="password.errors.required">
                        Password is required.
                    </div>
                    <div *ngIf="password.errors.minlength">
                        Password must be at least 4 characters long.
                    </div>
                </div>
                <div class="form-group">
                    <input type="password" class="form-control input-underline input-lg" id="confirmPassword" placeholder="Repeat Password" formControlName="confirmPassword">
                </div>
                <div class="alert alert-input-error" *ngIf="confirmPassword.invalid && (confirmPassword.touched || submitClicked) && confirmPassword.errors.mismatch">
                    <div>Passwords don't match</div>
                </div>
                <div class="form-group">
                    <label for="select">Role</label>
                    <select id="select" formControlName="role" [(ngModel)]="user.role">
                        <option *ngFor="let r of roleList" [value]="r"> {{r}}
                        </option>
                    </select>
                </div>
                <div class="alert alert-input-error" *ngIf="role.invalid && (role.touched || submitClicked)">
                    <div *ngIf="role.errors.required">
                        Role is required.
                    </div>
                </div>
            </div>
            <button class="btn btn-secondary" (click)="cancel()">Cancel</button>
            <button type="submit" class="btn btn-primary">Update</button>
        </form>
    </div>
</div>
<div *ngIf="userListError">
    <app-content-not-found></app-content-not-found>
</div>